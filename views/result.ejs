<div class="container">
  <% var searchTitle = 'Search Again'; %>
  <%- include('partials/search-form', { word: word || '', searchTitle: searchTitle }) %>

  <% if (error) { %>
    <div class="error-message">
      <p><%= error %></p>
    </div>
  <% } %>

  <% if (data && data.length > 0) { %>
    <div class="result-section">
      <% data.forEach((entry, index) => { %>
        <div class="word-entry">
          <div class="word-header">
            <h1><%= entry.word %></h1>
            <% if (entry.phonetic) { %>
              <span class="phonetic"><%= entry.phonetic %></span>
            <% } %>
          </div>

          <% if (entry.phonetics && entry.phonetics.length > 0) { %>
            <div class="phonetics">
              <% entry.phonetics.forEach(phonetic => { %>
                <% if (phonetic.audio) { %>
                  <audio controls>
                    <source src="<%= phonetic.audio %>" type="audio/mpeg">
                    Your browser does not support audio.
                  </audio>
                <% } %>
              <% }) %>
            </div>
          <% } %>

          <% if (entry.meanings && entry.meanings.length > 0) { %>
            <% entry.meanings.forEach(meaning => { %>
              <div class="meaning">
                <h3 class="part-of-speech"><%= meaning.partOfSpeech %></h3>
                
                <% if (meaning.definitions && meaning.definitions.length > 0) { %>
                  <ol class="definitions">
                    <% meaning.definitions.forEach(def => { %>
                      <li>
                        <p class="definition"><%= def.definition %></p>
                        <% if (def.example) { %>
                          <p class="example"><em>Example: "<%= def.example %>"</em></p>
                        <% } %>
                        <% if (def.synonyms && def.synonyms.length > 0) { %>
                          <p class="synonyms"><strong>Synonyms:</strong> <%= def.synonyms.join(', ') %></p>
                        <% } %>
                      </li>
                    <% }) %>
                  </ol>
                <% } %>

                <% if (meaning.synonyms && meaning.synonyms.length > 0) { %>
                  <p class="synonyms-section"><strong>Synonyms:</strong> <%= meaning.synonyms.join(', ') %></p>
                <% } %>

                <% if (meaning.antonyms && meaning.antonyms.length > 0) { %>
                  <p class="antonyms-section"><strong>Antonyms:</strong> <%= meaning.antonyms.join(', ') %></p>
                <% } %>
              </div>
            <% }) %>
          <% } %>
        </div>
      <% }) %>
    </div>
  <% } %>

  <%- include('partials/footer-image', { imageCaption: 'You cannot escape Dictionary Nelson. Image generated using Google Gemini.' }) %>
</div>
